<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@esengine/ecs-framework](./ecs-framework.md) &gt; [DirtyTrackingSystem](./ecs-framework.dirtytrackingsystem.md)

## DirtyTrackingSystem class

脏标记追踪系统

提供高效的组件和实体变更追踪，避免不必要的计算和更新。 支持细粒度的脏标记和批量处理机制。

**Signature:**

```typescript
export declare class DirtyTrackingSystem 
```

## Example


```typescript
const dirtySystem = new DirtyTrackingSystem();

// 标记实体的位置组件已修改
dirtySystem.markDirty(entity, DirtyFlag.TRANSFORM_CHANGED, [PositionComponent]);

// 监听位置变化
dirtySystem.addListener({
    flags: DirtyFlag.TRANSFORM_CHANGED,
    callback: (data) => {
        logger.debug('Entity position changed:', data.entity.name);
    }
});

// 处理所有脏标记
dirtySystem.processDirtyEntities();
```

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[addListener(listener)](./ecs-framework.dirtytrackingsystem.addlistener.md)


</td><td>


</td><td>

添加脏标记监听器


</td></tr>
<tr><td>

[beginFrame()](./ecs-framework.dirtytrackingsystem.beginframe.md)


</td><td>


</td><td>

开始新的帧


</td></tr>
<tr><td>

[clear()](./ecs-framework.dirtytrackingsystem.clear.md)


</td><td>


</td><td>

清空所有脏标记和统计信息


</td></tr>
<tr><td>

[clearDirty(entity, flags)](./ecs-framework.dirtytrackingsystem.cleardirty.md)


</td><td>


</td><td>

清除实体的脏标记


</td></tr>
<tr><td>

[configureBatchProcessing(batchSize, maxProcessingTime)](./ecs-framework.dirtytrackingsystem.configurebatchprocessing.md)


</td><td>


</td><td>

配置批量处理参数


</td></tr>
<tr><td>

[endFrame()](./ecs-framework.dirtytrackingsystem.endframe.md)


</td><td>


</td><td>

结束当前帧


</td></tr>
<tr><td>

[getDirtyEntities(flags)](./ecs-framework.dirtytrackingsystem.getdirtyentities.md)


</td><td>


</td><td>

获取所有脏实体


</td></tr>
<tr><td>

[getStats()](./ecs-framework.dirtytrackingsystem.getstats.md)


</td><td>


</td><td>

获取统计信息


</td></tr>
<tr><td>

[isDirty(entity, flags)](./ecs-framework.dirtytrackingsystem.isdirty.md)


</td><td>


</td><td>

检查实体是否有指定的脏标记


</td></tr>
<tr><td>

[markDirty(entity, flags, modifiedComponents)](./ecs-framework.dirtytrackingsystem.markdirty.md)


</td><td>


</td><td>

标记实体为脏状态


</td></tr>
<tr><td>

[processDirtyEntities()](./ecs-framework.dirtytrackingsystem.processdirtyentities.md)


</td><td>


</td><td>

批量处理脏实体

使用时间分片的方式处理脏实体，避免单帧卡顿


</td></tr>
<tr><td>

[removeListener(callback)](./ecs-framework.dirtytrackingsystem.removelistener.md)


</td><td>


</td><td>

移除脏标记监听器


</td></tr>
</tbody></table>

