<div class="welcome-container">
    <!-- å¤´éƒ¨æ¬¢è¿åŒºåŸŸ -->
    <div class="header">
        <h1>ğŸ® ECS Framework for Cocos Creator</h1>
        <p>é«˜æ€§èƒ½å®ä½“ç»„ä»¶ç³»ç»Ÿæ¡†æ¶</p>
    </div>

    <!-- æ“ä½œçŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ -->
    <div class="status-section" v-if="showOperationStatus">
        <div class="status-title">ğŸ“‹ æ“ä½œçŠ¶æ€</div>
        <div class="operation-status" :class="operationStatusType">
            <div class="status-content">
                <span v-if="operationStatusType === 'loading'" class="loading-spinner"></span>
                <span class="status-icon">{{ getStatusIcon(operationStatusType) }}</span>
                <span class="status-text">{{ operationStatusMessage }}</span>
            </div>
            <div v-if="operationStatusDetails" class="status-details">
                {{ operationStatusDetails }}
            </div>
        </div>
    </div>

    <!-- å®‰è£…çŠ¶æ€æ£€æµ‹åŒºåŸŸ -->
    <div class="status-section">
        <div class="status-title">ğŸ“¦ å®‰è£…çŠ¶æ€æ£€æµ‹</div>
        
        <div class="status-item">
            <span class="status-label">ECS Framework (@esengine/ecs-framework)</span>
            <div v-if="checkingStatus" class="status-badge checking">
                <span class="loading-spinner"></span>æ£€æµ‹ä¸­...
            </div>
            <div v-else-if="ecsInstalled" class="status-badge installed">
                âœ… å·²å®‰è£… <span class="version-info">v{{ecsVersion}}</span>
                <span v-if="hasUpdate" class="update-hint">æœ‰æ–°ç‰ˆæœ¬ï¼šv{{latestVersion}}</span>
            </div>
            <div v-else class="status-badge not-installed">
                âŒ æœªå®‰è£…
            </div>
        </div>

        <div class="status-item">
            <span class="status-label">é¡¹ç›®package.json</span>
            <div v-if="packageJsonExists" class="status-badge installed">
                âœ… å­˜åœ¨
            </div>
            <div v-else class="status-badge not-installed">
                âŒ ä¸å­˜åœ¨
            </div>
        </div>

        <div class="status-item">
            <span class="status-label">Node.jsç¯å¢ƒ</span>
            <div class="status-badge installed">
                âœ… v{{nodeVersion}}
            </div>
        </div>
    </div>

    <!-- ECSæ¡†æ¶ç®¡ç†åŒºåŸŸ -->
    <div class="status-section" v-if="ecsInstalled">
        <div class="status-title">ğŸ”§ ECS Framework ç®¡ç†</div>
        
        <div class="management-buttons">
            <ui-button 
                class="green" 
                :disabled="!hasUpdate || updating" 
                @click="updateEcsFramework">
                <span v-if="updating" class="loading-spinner"></span>
                {{ updating ? 'æ›´æ–°ä¸­...' : (hasUpdate ? `æ›´æ–°åˆ° v${latestVersion}` : 'å·²æ˜¯æœ€æ–°ç‰ˆæœ¬') }}
            </ui-button>
            
            <ui-button 
                class="red" 
                :disabled="uninstalling" 
                @click="uninstallEcsFramework">
                <span v-if="uninstalling" class="loading-spinner"></span>
                {{ uninstalling ? 'å¸è½½ä¸­...' : 'å¸è½½ ECS Framework' }}
            </ui-button>
            
            <ui-button 
                class="blue" 
                @click="checkForUpdates">
                ğŸ”„ æ£€æŸ¥æ›´æ–°
            </ui-button>
        </div>
    </div>

    <!-- å¿«é€Ÿæ“ä½œåŒºåŸŸ -->
    <div class="actions-section">
        <div class="status-title">ğŸš€ å¿«é€Ÿå¼€å§‹</div>
        
        <div class="action-card" :class="{ disabled: !packageJsonExists || installing }" @click="installEcsFramework">
            <h3>
                <span class="icon">ğŸ“¥</span>
                {{ ecsInstalled ? 'é‡æ–°å®‰è£… ECS Framework' : 'å®‰è£… ECS Framework' }}
            </h3>
            <p v-if="installing">æ­£åœ¨å®‰è£…ä¸­ï¼Œè¯·ç¨å€™...</p>
            <p v-else-if="!packageJsonExists">è¯·å…ˆç¡®ä¿é¡¹ç›®æœ‰package.jsonæ–‡ä»¶</p>
            <p v-else-if="ecsInstalled">é‡æ–°å®‰è£…å½“å‰ç‰ˆæœ¬çš„ECSæ¡†æ¶</p>
            <p v-else>å®‰è£…@esengine/ecs-frameworkåˆ°å½“å‰é¡¹ç›®</p>
        </div>

        <div class="action-card" @click="openDocumentation">
            <h3>
                <span class="icon">ğŸ“š</span>
                æŸ¥çœ‹æ–‡æ¡£
            </h3>
            <p>æ‰“å¼€ECSæ¡†æ¶å®Œæ•´ä½¿ç”¨æ–‡æ¡£å’Œæ•™ç¨‹</p>
        </div>

        <div class="action-card" :class="{ disabled: !ecsInstalled || templateExists }" @click="createEcsTemplate">
            <h3>
                <span class="icon">ğŸ› ï¸</span>
                åˆ›å»ºECSæ¨¡æ¿
            </h3>
            <p v-if="!ecsInstalled">è¯·å…ˆå®‰è£… ECS Framework</p>
            <p v-else-if="templateExists">âš ï¸ ECSæ¨¡æ¿å·²å­˜åœ¨ï¼Œé¿å…è¦†ç›–ç°æœ‰ä»£ç </p>
            <p v-else>ç”ŸæˆåŸºç¡€çš„ECSé¡¹ç›®ç»“æ„å’Œå¯åŠ¨ä»£ç </p>
            
            <div v-if="templateExists && existingFiles.length > 0" class="existing-files-info">
                <div class="files-summary">
                    æ£€æµ‹åˆ° {{existingFiles.length}} ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶
                </div>
                <div class="files-list" v-if="existingFiles.length <= 10">
                    <div v-for="file in existingFiles" :key="file" class="file-item">
                        ğŸ“„ {{file}}
                    </div>
                </div>
                <div v-else class="files-overflow">
                    <div v-for="file in existingFiles.slice(0, 8)" :key="file" class="file-item">
                        ğŸ“„ {{file}}
                    </div>
                    <div class="more-files">... è¿˜æœ‰ {{existingFiles.length - 8}} ä¸ªæ–‡ä»¶</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ä»£ç ç”Ÿæˆå·¥å…·åŒºåŸŸ -->
    <div class="actions-section" v-if="ecsInstalled">
        <div class="status-title">ğŸ› ï¸ ä»£ç ç”Ÿæˆå·¥å…·</div>
        
        <div class="action-card special" @click="openGenerator">
            <h3>
                <span class="icon">ğŸš€</span>
                ä»£ç ç”Ÿæˆå™¨
            </h3>
            <p>ä¸€ç«™å¼ä»£ç ç”Ÿæˆå·¥å…·ï¼Œè¾“å…¥åŠŸèƒ½åç§°å¿«é€Ÿç”Ÿæˆç»„ä»¶å’Œç³»ç»Ÿä»£ç </p>
        </div>

    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <div class="footer">
        <p>ECS Framework Plugin v{{pluginVersion}} | åŸºäºVue 3.xæ„å»º</p>
        <p>
            æ›´å¤šä¿¡æ¯è¯·è®¿é—®: <a href="#" @click="openGithub">GitHub Repository</a> | 
            <a href="#" @click="joinQQGroup">ğŸ’¬ åŠ å…¥QQç¾¤äº¤æµ</a>
        </p>
        <p v-if="lastCheckTime" class="last-check">æœ€åæ£€æŸ¥æ—¶é—´: {{lastCheckTime}}</p>
    </div>
</div> 