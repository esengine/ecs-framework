queue_rules:
  - name: default
    conditions:
      - check-success=CI
      - check-success=Commit Lint

pull_request_rules:
  # è‡ªåŠ¨åˆå¹¶ Dependabot çš„ patch ç‰ˆæœ¬æ›´æ–°
  - name: è‡ªåŠ¨åˆå¹¶ Dependabot patch æ›´æ–°
    conditions:
      - author=dependabot[bot]
      - check-success=CI
      - check-success=Commit Lint
      - title~=^build\(deps\): bump .* from .* to .*
      - files~=^package-lock\.json$
    actions:
      review:
        type: APPROVE
        message: è‡ªåŠ¨æ‰¹å‡† Dependabot çš„ patch æ›´æ–°
      queue:
        name: default
        method: squash
        commit_message_template: |
          {{ title }} (#{{ number }})

          {{ body }}

  # è‡ªåŠ¨åˆå¹¶æœ‰ 'automerge' æ ‡ç­¾ä¸”æµ‹è¯•é€šè¿‡çš„ PR
  - name: è‡ªåŠ¨åˆå¹¶æ ‡è®°çš„ PR
    conditions:
      - label=automerge
      - check-success=CI
      - check-success=Commit Lint
      - "#approved-reviews-by>=1"
      - "#changes-requested-reviews-by=0"
    actions:
      queue:
        name: default
        method: squash

  # è‡ªåŠ¨ç»™å° PR æ·»åŠ æ ‡ç­¾
  - name: æ ‡è®°å° PR æ–¹ä¾¿å¿«é€Ÿ Review
    conditions:
      - files<=3
      - lines<=50
    actions:
      label:
        add:
          - quick-review

  # æé†’å¤§ PR éœ€è¦æ‹†åˆ†
  - name: æé†’å¤§ PR
    conditions:
      - lines>1000
    actions:
      comment:
        message: |
          âš ï¸ è¿™ä¸ª PR æ”¹åŠ¨è¶…è¿‡ 1000 è¡Œï¼Œå»ºè®®æ‹†åˆ†æˆå¤šä¸ªå° PRï¼Œä¾¿äº Review å’Œæµ‹è¯•ã€‚

          âš ï¸ This PR has over 1000 lines changed. Consider splitting it into smaller PRs for easier review and testing.

  # è‡ªåŠ¨æ›´æ–°è¿‡æœŸçš„åˆ†æ”¯
  - name: è‡ªåŠ¨æ›´æ–°è¿‡æœŸåˆ†æ”¯
    conditions:
      - -draft
      - -closed
      - base=master
      - "#approved-reviews-by>=1"
    actions:
      update:
        method: rebase

  # æ„Ÿè°¢é¦–æ¬¡è´¡çŒ®è€…
  - name: æ„Ÿè°¢æ–°è´¡çŒ®è€…
    conditions:
      - author!=dependabot[bot]
      - author!=dependabot-preview[bot]
      - "#commits-behind=0"
    actions:
      comment:
        message: |
          ğŸ‰ æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼æˆ‘ä»¬ä¼šå°½å¿« Reviewã€‚

          ğŸ‰ Thanks for your contribution! We'll review it soon.
